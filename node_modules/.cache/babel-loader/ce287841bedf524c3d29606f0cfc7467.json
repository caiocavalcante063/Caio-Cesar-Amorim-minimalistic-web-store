{"ast":null,"code":"var _jsxFileName = \"/home/caio/Documentos/trybe/github-repositorios/minimalistic-web-store/src/pages/ProductDetails.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { PRODUCT_QUERY } from \"../graphQL/queries\";\nimport { client } from \"..\";\nimport AddToCartButton from \"../components/AddToCartButton\";\nimport ProductAttributes from \"../components/ProductAttributes\";\nimport { getProductPrice } from \"../utils/utils\";\nimport \"../styles/main.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProductDetails extends Component {\n  constructor() {\n    super();\n    this.state = {\n      productId: \"\",\n      productDetails: {},\n      selectedAttributes: {},\n      mainImage: \"\"\n    };\n    this.handleCart = this.handleCart.bind(this);\n  }\n\n  componentDidMount() {\n    const path = window.location.pathname;\n    const productId = path === \"/\" ? \"all\" : path.split(\"/\")[2];\n    this.setState({\n      productId\n    }, () => client.query({\n      query: PRODUCT_QUERY,\n      variables: {\n        id: `${productId}`\n      }\n    }).then(result => this.setState({\n      productDetails: result.data.product,\n      mainImage: result.data.product.gallery[0]\n    })));\n  }\n\n  handleCart(attributes) {\n    this.setState(prevState => ({\n      selectedAttributes: { ...prevState.selectedAttributes,\n        ...attributes\n      }\n    }));\n  }\n\n  handleDescription(productDescription) {\n    return {\n      __html: `${productDescription}`\n    };\n  }\n\n  render() {\n    const {\n      productDetails,\n      selectedAttributes,\n      mainImage\n    } = this.state;\n    const {\n      currency\n    } = this.props;\n    const {\n      brand,\n      gallery,\n      name,\n      attributes,\n      prices,\n      description\n    } = productDetails;\n    const price = getProductPrice(prices, currency);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"body-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-details-gallery-container\",\n          children: gallery && gallery.slice(0, 4).map((image, index) => {\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"gallery-img\",\n              onClick: e => this.setState({\n                mainImage: e.target.src\n              }),\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: image,\n                alt: name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 21\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-details-main-img-container\",\n          children: gallery && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: mainImage,\n            alt: name,\n            width: \"300px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-details-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-details-info-title\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: brand\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-details-info-attributes-container\",\n            children: attributes && /*#__PURE__*/_jsxDEV(ProductAttributes, {\n              attributes: attributes,\n              handleCart: this.handleCart.bind(this),\n              selectedAttributes: selectedAttributes\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-details-info-price-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"PRICE:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: prices && `${price.currency.symbol}${price.amount}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-details-info-cart-button-container\",\n            children: /*#__PURE__*/_jsxDEV(AddToCartButton, {\n              selectedAttributes: selectedAttributes,\n              productDetails: productDetails\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), description && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-details-info-description-container\",\n            dangerouslySetInnerHTML: this.handleDescription(description)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  currency: state.currentCurrency.currency\n});\n\nexport default connect(mapStateToProps)(ProductDetails);","map":{"version":3,"sources":["/home/caio/Documentos/trybe/github-repositorios/minimalistic-web-store/src/pages/ProductDetails.jsx"],"names":["React","Component","connect","PRODUCT_QUERY","client","AddToCartButton","ProductAttributes","getProductPrice","ProductDetails","constructor","state","productId","productDetails","selectedAttributes","mainImage","handleCart","bind","componentDidMount","path","window","location","pathname","split","setState","query","variables","id","then","result","data","product","gallery","attributes","prevState","handleDescription","productDescription","__html","render","currency","props","brand","name","prices","description","price","slice","map","image","index","e","target","src","symbol","amount","mapStateToProps","currentCurrency"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { PRODUCT_QUERY } from \"../graphQL/queries\";\nimport { client } from \"..\";\nimport AddToCartButton from \"../components/AddToCartButton\";\nimport ProductAttributes from \"../components/ProductAttributes\";\nimport { getProductPrice } from \"../utils/utils\";\nimport \"../styles/main.css\";\n\nclass ProductDetails extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      productId: \"\",\n      productDetails: {},\n      selectedAttributes: {},\n      mainImage: \"\",\n    };\n\n    this.handleCart = this.handleCart.bind(this);\n  }\n\n  componentDidMount() {\n    const path = window.location.pathname;\n    const productId = path === \"/\" ? \"all\" : path.split(\"/\")[2];\n\n    this.setState({ productId }, () =>\n      client\n        .query({\n          query: PRODUCT_QUERY,\n          variables: { id: `${productId}` },\n        })\n        .then((result) =>\n          this.setState({\n            productDetails: result.data.product,\n            mainImage: result.data.product.gallery[0],\n          })\n        )\n    );\n  }\n\n  handleCart(attributes) {\n    this.setState((prevState) => ({\n      selectedAttributes: {\n        ...prevState.selectedAttributes,\n        ...attributes,\n      },\n    }));\n  }\n\n  handleDescription(productDescription) {\n    return { __html: `${productDescription}` };\n  }\n\n  render() {\n    const { productDetails, selectedAttributes, mainImage } = this.state;\n    const { currency } = this.props;\n    const { brand, gallery, name, attributes, prices, description } =\n      productDetails;\n    const price = getProductPrice(prices, currency);\n\n    return (\n      <div className=\"body-wrapper\">\n        <div className=\"product-details\">\n          <div className=\"product-details-gallery-container\">\n            {gallery &&\n              gallery.slice(0, 4).map((image, index) => {\n                return (\n                  <button\n                    className=\"gallery-img\"\n                    onClick={(e) => this.setState({ mainImage: e.target.src })}\n                    key={index}\n                  >\n                    <img src={image} alt={name} />\n                  </button>\n                );\n              })}\n          </div>\n          <div className=\"product-details-main-img-container\">\n            {gallery && <img src={mainImage} alt={name} width=\"300px\" />}\n          </div>\n          <div className=\"product-details-info\">\n            <div className=\"product-details-info-title\">\n              <h1>{brand}</h1>\n              <h1>{name}</h1>\n            </div>\n            <div className=\"product-details-info-attributes-container\">\n              {attributes && (\n                <ProductAttributes\n                  attributes={attributes}\n                  handleCart={this.handleCart.bind(this)}\n                  selectedAttributes={selectedAttributes}\n                />\n              )}\n            </div>\n            <div className=\"product-details-info-price-container\">\n              <h2>PRICE:</h2>\n              <h2>{prices && `${price.currency.symbol}${price.amount}`}</h2>\n            </div>\n            <div className=\"product-details-info-cart-button-container\">\n              <AddToCartButton\n                selectedAttributes={selectedAttributes}\n                productDetails={productDetails}\n              />\n            </div>\n            {/* using element's html structure to create the product description */}\n            {description && (\n              <div\n                className=\"product-details-info-description-container\"\n                dangerouslySetInnerHTML={this.handleDescription(description)}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  currency: state.currentCurrency.currency,\n});\n\nexport default connect(mapStateToProps)(ProductDetails);\n"]},"metadata":{},"sourceType":"module"}